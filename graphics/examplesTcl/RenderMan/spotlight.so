light spotlight
param
	float 	intensity	 1 
	color 	lightcolor	 1 1 1 
	point 	from	0 0 0
initcode
	pushiv	0 0 0
	pushif	101
	transform
	popv from
param
	point 	to	0 0 0
initcode
	pushiv	0 0 1
	pushif	101
	transform
	popv to
param
	float 	coneangle	 0.523599 
	float 	conedeltaangle	 0.0872665 
	float 	beamdistribution	 2 
initcode
	return
local
	float 	atten	0
	float 	cosangle	0
	uniform point 	A	0 0 0
code
	pushv	from
	pushv	to
	subvv
	normalize
	popv A
local
code
	pushf	coneangle
	pushv	A
	pushv	from
	illuminate3  0
	pushv	L
	length
	pushv	A
	pushv	L
	vdot
	divff
	popf	cosangle
	pushv	L
	pushv	L
	vdot
	pushf	beamdistribution
	pushf	cosangle
	pow
	divff
	popf	atten
	pushf	cosangle
	pushf	conedeltaangle
	pushf	coneangle
	subff
	cos
	pushf	coneangle
	cos
	smoothstep
	pushf	atten
	mulff
	popf	atten
	pushc	lightcolor
	pushf	intensity
	pushf	atten
	mulff
	mulfc
	popc	Cl
label 0
	return
