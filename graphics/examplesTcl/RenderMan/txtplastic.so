surface txtplastic
param
	float 	Ks	 0.5 
	float 	Kd	 0.5 
	float 	Ka	 1 
	float 	roughness	 0.1 
	color 	specularcolor	 1 1 1 
	string 	mapname	 "" 
initcode
	return
local
	point 	Nf	0 0 0
code
	pushv	I
	pushv	N
	normalize
	faceforward
	popv Nf
local
	string _s_0 ""
	string _s_1 ""
code
	pushs	_s_1
	pushs	mapname
	sne
	ifz	0
	pushif	-1
	pushs	mapname
	pushif	0
	pushif	0
	ctexture
	popc	Ci
	pushc	Cs
	pushc	Ci
	mulcc
	popc	Ci
	pushif	3
	pushs	mapname
	pushif	0
	pushif	0
	ctexture
	popc	Oi
	return_area
	pushc	Oi
	pushif	0
	pushc	Oi
	comp
	pushif	1
	setcomp
	popv	Oi
	pushc	Oi
	pushif	0
	pushc	Oi
	comp
	pushif	2
	setcomp
	popv	Oi
	pushc	Os
	pushc	Oi
	mulcc
	popc	Oi
	jump	1
label 0
	pushc	Cs
	popc	Ci
	pushc	Os
	popc	Oi
label 1
	pushf	roughness
	pushif	1
	divff
	pushv	I
	negv
	pushv	Nf
	phong
	pushf	Ks
	pushc	specularcolor
	mulcf
	mulcc
	pushv	Nf
	diffuse
	pushf	Kd
	mulfc
	ambient
	pushf	Ka
	mulfc
	addcc
	pushc	Ci
	mulcc
	addcc
	pushc	Oi
	mulcc
	popc	Ci
	return
