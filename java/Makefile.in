#
# vtk library makefile
#

#
# Makefile for Visualization Toolkit sources. 
# 
#------------------------------------------------------------------------------
#

SHELL = /bin/sh
.SUFFIXES: .cxx .java


srcdir        = @srcdir@
VPATH         = @srcdir@

#------------------------------------------------------------------------------
# Autoconfig defines that can be overridden in user.make

@MAKEINCLUDE@ @MAKEQUOTE@../system.make@MAKEQUOTE@

#------------------------------------------------------------------------------
# Include user-editable defines.

@MAKEINCLUDE@ @MAKEQUOTE@../user.make@MAKEQUOTE@

#------------------------------------------------------------------------------
LDLIBS = -L../common \
        ${USE_CONTRIB_LIBS}	\
        ${USE_GEAE_LIBS}	\
        ${USE_GEMSIO_LIBS}	\
        ${USE_GEMSVOLUME_LIBS}	\
        ${USE_GEMSIP_LIBS}	\
        ${USE_VOLUME_LIBS}		\
        ${USE_PATENTED_LIBS}		\
	${USE_IMAGING_LIBS}	\
	${USE_GRAPHICS_LIBS}	\
        -lVTKCommonJava \
        ${XLIBS} ${GRAPHICS_API_LIBS} ${DL_LIBS} ${THREAD_LIBS}

C_FLAGS = ${CPPFLAGS} ${XCFLAGS} ${CFLAGS} -I${srcdir} 

all:  java_parse java_wrap 

vtk/vtkPanel.class: vtk/vtkPanel.java
	${JAVAC} -d ${JAVA_CLASS_HOME} ${srcdir}/vtk/vtkPanel.java

java_parse: $(srcdir)/java_parse.tab.c $(srcdir)/lex.yy.c
	$(CC) $(C_FLAGS) -I. -o java_parse $(srcdir)/java_parse.tab.c -lm

java_wrap: $(srcdir)/java_wrap.tab.c $(srcdir)/lex.yy.c
	$(CC) $(C_FLAGS) -I. -o java_wrap $(srcdir)/java_wrap.tab.c -lm

#------------------------------------------------------------------------------
# build the vtk java library
#
vtk: libvtkJava$(SHLIB_SUFFIX)$(SHLIB_VERSION)

libvtkJava$(SHLIB_SUFFIX)$(SHLIB_VERSION): 
	$(SHLIB_LD) -o libvtkJava$(SHLIB_SUFFIX)$(SHLIB_VERSION) -L. \
	${XLDFLAGS} ${LDLIBS} \
	${XLIBS} -lXext ${X_PRE_LIBS} -lX11 ${X_EXTRA_LIBS} ${JAVA_CXX_LIB}

#------------------------------------------------------------------------------
clean: 
	-rm -f *.o *.a java_parse java_wrap Makefile


