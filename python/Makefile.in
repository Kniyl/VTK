#
# vtk library makefile
#

#
# Makefile for Visualization Toolkit sources. 
# 
#------------------------------------------------------------------------------
#

SHELL = /bin/sh
.SUFFIXES: .cxx

srcdir        = @srcdir@
VPATH         = @srcdir@

#------------------------------------------------------------------------------
# Autoconfig defines that can be overridden in user.make

@MAKEINCLUDE@ @MAKEQUOTE@../system.make@MAKEQUOTE@

#------------------------------------------------------------------------------
# Include user-editable defines.

@MAKEINCLUDE@ @MAKEQUOTE@../user.make@MAKEQUOTE@

#------------------------------------------------------------------------------
LDLIBS =  \
	${USE_LOCAL_PYTHON}	\
	${USE_CONTRIB_PYTHON}	\
	${USE_PATENTED_PYTHON}	\
	${USE_IMAGING_PYTHON}	\
	${USE_GRAPHICS_PYTHON}	\
        -L../common -lVTKCommonPython \
	${XLIBS} ${GRAPHICS_API_LIBS} \
	${DL_LIBS} \
	${THREAD_LIBS}

CXX_FLAGS = ${USER_CXXFLAGS} ${CPPFLAGS} ${CXXFLAGS} -I${srcdir} \
	-I${srcdir}/../common ${PYTHON_INCLUDES} ${TK_INCLUDE} \
	-DVTK_USE_TKWIDGET ${GRAPHICS_API_FLAGS} ${TCL_INCLUDE} \
	${USE_TOOLKIT_FLAGS}

C_FLAGS = ${USER_CFLAGS} ${CPPFLAGS} ${CFLAGS} -I${srcdir} \
	${PYTHON_INCLUDES} -DVTK_USE_TKWIDGET \
	${GRAPHICS_API_FLAGS} ${USE_TOOLKIT_FLAGS}

all: vtkpython @TKWIDGET_TARGETS@

vtkpython: vtkpython.so
	@echo ""

vtkpython.o: vtkpython.c Makefile
	$(CC) $(C_FLAGS) -c -o vtkpython.o $(srcdir)/vtkpython.c

vtkTkRenderWidget: 
	${CXX} -o vtkTkRenderWidget -DVTK_PYTHON_BUILD \
	${srcdir}/../graphics/vtkTkRenderWidget.cxx \
	-L. ${CXX_FLAGS} ${VTK_SHLIB_BUILD_FLAGS} ${XLDFLAGS} ${LDLIBS} \
	${XLIBS} -lXext -lXt ${X_PRE_LIBS} -lX11 ${X_EXTRA_LIBS} -lm

vtkTkImageViewerWidget: 
	${CXX} -o vtkTkImageViewerWidget -DVTK_PYTHON_BUILD \
	${srcdir}/../imaging/vtkTkImageViewerWidget.cxx \
	-L. ${CXX_FLAGS} ${VTK_SHLIB_BUILD_FLAGS} ${XLDFLAGS} ${LDLIBS} \
	${XLIBS} -lXext -lXt ${X_PRE_LIBS} -lX11 ${X_EXTRA_LIBS} -lm

vtkTkImageWindowWidget: 
	${CXX} -o vtkTkImageWindowWidget -DVTK_PYTHON_BUILD \
	${srcdir}/../imaging/vtkTkImageWindowWidget.cxx \
	-L. ${CXX_FLAGS} ${VTK_SHLIB_BUILD_FLAGS} ${XLDFLAGS} ${LDLIBS} \
	${XLIBS} -lXext -lXt ${X_PRE_LIBS} -lX11 ${X_EXTRA_LIBS} -lm

#------------------------------------------------------------------------------
# build the vtkpython module 
#
vtkpython.so: Makefile vtkpython.o ${TOOLKIT_DEPENDS}
	${CXX} -o vtkpython.so vtkpython.o \
	-L. ${CXX_FLAGS} ${VTK_SHLIB_BUILD_FLAGS} ${XLDFLAGS} ${LDLIBS} \
	${XLIBS} -lXext -lXt ${X_PRE_LIBS} -lX11 ${X_EXTRA_LIBS} -lm

#------------------------------------------------------------------------------
install:

#------------------------------------------------------------------------------
clean: 
	-rm -f *.so *.o *.a *.pyc Makefile


