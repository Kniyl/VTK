#
# vtk library makefile
#

#
# Makefile for Visualization Toolkit sources. 
# 
#------------------------------------------------------------------------------
#

SHELL = /bin/sh
.SUFFIXES: .cxx

#------------------------------------------------------------------------------
# Autoconfig defines that can be overridden in Config.mk

CC            = @CC@
CFLAGS        = @CFLAGS@
CXX           = @CXX@
CXXFLAGS      = @CXXFLAGS@
XCFLAGS       = @X_CFLAGS@
XLIBS         = @X_LIBS@
RANLIB        = @RANLIB@
srcdir        = @srcdir@
VPATH         = @srcdir@
prefix        = @prefix@
exec_prefix   = @exec_prefix@
WORDS_BIGENDIAN   = @BIGENDIAN@
LEX 	      = @LEX@
LEXLIB        = @LEXLIB@
YACC          = @YACC@
XGL_HOME      = @XGL_HOME@
X_EXTRA_LIBS  = @X_EXTRA_LIBS@
X_PRE_LIBS    = @X_PRE_LIBS@
DL_LIBS       = @DL_LIBS@
COMMON_DEPENDS = @COMMON_DEPENDS@
VTK_INLINE_FLAGS  = @VTK_INLINE_FLAGS@
USE_GRAPHICS_FLAG = @USE_GRAPHICS_FLAG@
USE_GRAPHICS_LIBS = @USE_GRAPHICS_LIBS@
USE_GRAPHICS_DEPENDS = @USE_GRAPHICS_DEPENDS@
USE_IMAGING_FLAG = @USE_IMAGING_FLAG@
USE_IMAGING_LIBS = @USE_IMAGING_LIBS@
USE_IMAGING_DEPENDS = @USE_IMAGING_DEPENDS@
USE_PATENTED_FLAG = @USE_PATENTED_FLAG@
USE_PATENTED_LIBS = @USE_PATENTED_LIBS@
USE_PATENTED_DEPENDS = @USE_PATENTED_DEPENDS@
USE_VOLUME_FLAG = @USE_VOLUME_FLAG@
USE_VOLUME_LIBS = @USE_VOLUME_LIBS@
USE_VOLUME_DEPENDS = @USE_VOLUME_DEPENDS@
USE_BORESCOPE_FLAG  = @USE_BORESCOPE_FLAG@
USE_BORESCOPE_LIBS  = @USE_BORESCOPE_LIBS@
USE_BORESCOPE_DEPENDS = @USE_BORESCOPE_DEPENDS@
USE_CONTRIB_FLAG  = @USE_CONTRIB_FLAG@
USE_CONTRIB_LIBS  = @USE_CONTRIB_LIBS@
USE_CONTRIB_DEPENDS = @USE_CONTRIB_DEPENDS@
USE_GEAE_FLAG  = @USE_GEAE_FLAG@
USE_GEAE_LIBS  = @USE_GEAE_LIBS@
USE_GEAE_DEPENDS = @USE_GEAE_DEPENDS@
USE_GEMSIP_FLAG  = @USE_GEMSIP_FLAG@
USE_GEMSIP_LIBS  = @USE_GEMSIP_LIBS@
USE_GEMSIP_DEPENDS = @USE_GEMSIP_DEPENDS@
USE_GEMSIO_FLAG  = @USE_GEMSIO_FLAG@
USE_GEMSIO_LIBS  = @USE_GEMSIO_LIBS@
USE_GEMSIO_DEPENDS = @USE_GEMSIO_DEPENDS@
USE_GEMSVOLUME_FLAG  = @USE_GEMSVOLUME_FLAG@
USE_GEMSVOLUME_LIBS  = @USE_GEMSVOLUME_LIBS@
USE_GEMSVOLUME_DEPENDS = @USE_GEMSVOLUME_DEPENDS@
XGLR_LIBS	= @XGLR_LIBS@
XGLR_FLAGS 	= @XGLR_FLAGS@
GLR_LIBS	= @GLR_LIBS@
GLR_FLAGS 	= @GLR_FLAGS@
OGLR_LIBS	= @OGLR_LIBS@
OGLR_FLAGS 	= @OGLR_FLAGS@
SBR_LIBS	= @SBR_LIBS@
SBR_FLAGS 	= @SBR_FLAGS@

#------------------------------------------------------------------------------
# Include user-editable defines.

@MAKEINCLUDE@ @MAKEQUOTE@../Config.mk@MAKEQUOTE@

#------------------------------------------------------------------------------
LDLIBS = -L../common -lVTKCommonTcl ${USE_GRAPHICS_LIBS}	\
				    ${USE_IMAGING_LIBS}		\
				    ${USE_BORESCOPE_LIBS}	\
				    ${USE_CONTRIB_LIBS}	\
				    ${USE_GEAE_LIBS}	\
				    ${USE_GEMSIO_LIBS}	\
				    ${USE_GEMSVOLUME_LIBS}	\
				    ${USE_GEMSIP_LIBS}	\
				    ${USE_VOLUME_LIBS}		\
				    ${USE_PATENTED_LIBS}		\
				    ${XLIBS} ${OGLR_LIBS} ${GLR_LIBS} \
				    ${SBR_LIBS} ${XGLR_LIBS} \
				    ${TK_LIB} ${TCL_LIB} ${DL_LIBS} \
				    @THREAD_LIBS@

CXX_FLAGS = ${CPPFLAGS} ${VTK_SHLIB_CFLAGS} ${XCFLAGS} ${CXXFLAGS} \
	${VTK_INLINE_FLAGS} ${VTK_TEMPLATE_FLAGS} -I${srcdir} \
	-I${srcdir}/../common ${TK_INCLUDE} ${TCL_INCLUDE} \
	${USE_GRAPHICS_FLAG} ${USE_IMAGING_FLAG} ${USE_BORESCOPE_FLAG} \
	${USE_VOLUME_FLAG} ${USE_PATENTED_FLAG} \
	${USE_CONTRIB_FLAG} ${USE_GEAE_FLAG} ${USE_GEMSIP_FLAG} \
	${USE_GEMSIO_FLAG} ${USE_GEMSVOLUME_FLAG} \
	${XGLR_FLAGS} ${OGLR_FLAGS} ${SBR_FLAGS} ${GLR_FLAGS} \
	-D_HP_NO_FAST_MACROS ${HAVE_SETMON} ${WORDS_BIGENDIAN}

C_FLAGS = ${CPPFLAGS} ${XCFLAGS} ${CFLAGS} -I${srcdir} \
	${TK_INCLUDE} ${TCL_INCLUDE} \
	${USE_GRAPHICS_FLAG} ${USE_IMAGING_FLAG} ${USE_BORESCOPE_FLAG} ${USE_VOLUME_FLAG}\
	${USE_CONTRIB_FLAG} ${USE_GEAE_FLAG} ${USE_GEMSIP_FLAG} \
	${USE_GEMSIO_FLAG} ${USE_GEMSVOLUME_FLAG} ${USE_PATENTED_FLAG} \
	${XGLR_FLAGS} ${OGLR_FLAGS} ${SBR_FLAGS} ${GLR_FLAGS} \
	-D_HP_NO_FAST_MACROS

all:  kit_init cpp_parse

kit_init: kit_init.c
	$(CC) $(C_FLAGS) -o kit_init $(srcdir)/kit_init.c

tkAppInit.o: tkAppInit.c Makefile
	$(CC) $(C_FLAGS) -c -o tkAppInit.o $(srcdir)/tkAppInit.c

cpp_parse: $(srcdir)/y.tab.c $(srcdir)/lex.yy.c
	$(CC) $(C_FLAGS) -I. -o cpp_parse $(srcdir)/y.tab.c -lm

#------------------------------------------------------------------------------
# build the vtk executable
#
vtk: 	Makefile tkAppInit.o ${COMMON_DEPENDS} ${USE_GRAPHICS_DEPENDS} \
	${USE_IMAGING_DEPENDS} ${USE_BORESCOPE_DEPENDS} ${USE_VOLUME_DEPENDS} \
	${USE_CONTRIB_DEPENDS} ${USE_GEAE_DEPENDS} ${USE_GEMSIP_DEPENDS} \
	${USE_GEMSIO_DEPENDS} ${USE_GEMSVOLUME_DEPENDS} \
	${USE_PATENTED_DEPENDS}
	$(CXX) -o vtk tkAppInit.o \
	-L. @VTK_SHLIB_LINK_FLAGS@ ${XLDFLAGS} ${LDLIBS} \
	${XLIBS} -lXext ${X_PRE_LIBS} -lX11 ${X_EXTRA_LIBS} -lm


#------------------------------------------------------------------------------
clean: 
	-rm -f *.o *.a cpp_parse kit_init Makefile


